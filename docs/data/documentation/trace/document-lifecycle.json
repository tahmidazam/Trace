{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A file type should strive to be minimal to be space-efficient on disk and require little overhead to create an instance from raw file data. The structure "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument"},{"type":"text","text":" represents the Trace file type, "},{"type":"codeVoice","code":".trace"},{"type":"text","text":" and governs the lifecycle of a trace document."}]},{"anchor":"Balancing-space-efficiency-and-property-convenience","level":2,"type":"heading","text":"Balancing space-efficiency and property convenience"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents"},{"type":"text","text":" structure has property types that are more convenient to manipulate, specifically the property "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents\/streams"},{"type":"text","text":" which has type "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/Stream"},{"type":"text","text":". This is relative to a dictionary of keys representing electrodes and values representing samples. However the latter is more space efficient as JSON, and is found in "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents"},{"type":"text","text":". "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents"},{"type":"text","text":" can be converted into "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents"},{"type":"text","text":" through its initialiser, and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents"},{"type":"text","text":" can be turned into "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents"},{"type":"text","text":" through the computed property "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents\/uncompressed()"},{"type":"text","text":". The contents is held in the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument"},{"type":"text","text":" as "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents"},{"type":"text","text":" when a file is open, but is compressed to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents"},{"type":"text","text":" for writing to disk."}]},{"anchor":"Lifecycle-components","level":2,"type":"heading","text":"Lifecycle components"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When a file is opened, it is either new or pre-existing:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Opening new files: file creation is managed by SwiftUI’s DocumentGroup (which is intialised in "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceApp\/body"},{"type":"text","text":"), which passes a new document into "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/DocumentView"},{"type":"text","text":" as a binding "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument"},{"type":"text","text":" after intialisation through "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument\/init(trace:)"},{"type":"text","text":". An empty Trace document has an empty array for its samples array and a sample rate of "},{"type":"codeVoice","code":"200"},{"type":"text","text":" Hz as default."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Opening pre-existing files: SwiftUI’s DocumentGroup also passes through a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument"},{"type":"text","text":" instance when the scene opens a pre-existing file after initialisation through "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument\/init(configuration:)"},{"type":"text","text":". The read configuration contains the file contents as raw data, which is then decoded into an instance of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents"},{"type":"text","text":" from JSON. The instance is then uncompressed by "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents\/uncompressed()"},{"type":"text","text":"."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument\/fileWrapper(configuration:)"},{"type":"text","text":" function governs saving of the file to disk. A "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents"},{"type":"text","text":" is initialised from a snapshot of the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents"},{"type":"text","text":" held by "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument\/contents"},{"type":"text","text":" and then encoded to JSON and saved through a file wrapper."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/trace\/document-lifecycle"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/Document-lifecycle","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Understand Trace document file creation and writing to disk."}],"kind":"article","metadata":{"modules":[{"name":"Trace"}],"role":"collectionGroup","title":"Document lifecycle"},"hierarchy":{"paths":[["doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace"]]},"topicSections":[{"title":"Relevant structures","identifiers":["doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument","doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents","doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents"]}],"references":{"doc://Tahmid-Azam.Trace/documentation/Trace/TraceDocumentContents":{"role":"symbol","title":"TraceDocumentContents","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"TraceDocumentContents"}],"abstract":[{"type":"text","text":"The data structure for the contents of a trace document."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TraceDocumentContents"}],"url":"\/documentation\/trace\/tracedocumentcontents"},"doc://Tahmid-Azam.Trace/documentation/Trace/TraceDocument/contents":{"role":"symbol","title":"contents","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"contents"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"TraceDocumentContents","preciseIdentifier":"s:5Trace0A16DocumentContentsV"}],"abstract":[{"type":"text","text":"The contents of the trace document."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument\/contents","kind":"symbol","type":"topic","url":"\/documentation\/trace\/tracedocument\/contents"},"doc://Tahmid-Azam.Trace/documentation/Trace/CompressedTraceDocumentContents":{"role":"symbol","title":"CompressedTraceDocumentContents","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"CompressedTraceDocumentContents"}],"abstract":[{"type":"text","text":"A compressed format for "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents"},{"type":"text","text":"."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CompressedTraceDocumentContents"}],"url":"\/documentation\/trace\/compressedtracedocumentcontents"},"doc://Tahmid-Azam.Trace/documentation/Trace/DocumentView":{"role":"symbol","title":"DocumentView","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DocumentView"}],"abstract":[],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/DocumentView","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DocumentView"}],"url":"\/documentation\/trace\/documentview"},"doc://Tahmid-Azam.Trace/documentation/Trace/TraceDocument/init(configuration:)":{"role":"symbol","title":"init(configuration:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"configuration"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ReadConfiguration","preciseIdentifier":"s:7SwiftUI12FileDocumentP17ReadConfigurationa"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Initialises a trace document by reading a file and decoding and uncompressing its JSON data."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument\/init(configuration:)","kind":"symbol","type":"topic","url":"\/documentation\/trace\/tracedocument\/init(configuration:)"},"doc://Tahmid-Azam.Trace/documentation/Trace/Stream":{"role":"symbol","title":"Stream","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Stream"}],"abstract":[{"type":"text","text":"The data structure of an electrode’s data stream."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/Stream","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Stream"}],"url":"\/documentation\/trace\/stream"},"doc://Tahmid-Azam.Trace/documentation/Trace/TraceDocument":{"role":"symbol","title":"TraceDocument","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"TraceDocument"}],"abstract":[{"type":"text","text":"The trace document structure."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TraceDocument"}],"url":"\/documentation\/trace\/tracedocument"},"doc://Tahmid-Azam.Trace/documentation/Trace":{"role":"collection","title":"Trace","abstract":[{"type":"text","text":"A document-based SwiftUI application for viewing and editing EEG data, aimed at making software for viewing brain imaging data more accessible."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace","kind":"symbol","type":"topic","url":"\/documentation\/trace"},"doc://Tahmid-Azam.Trace/documentation/Trace/TraceApp/body":{"role":"symbol","title":"body","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"body"},{"kind":"text","text":": "},{"kind":"keyword","text":"some"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"Scene","preciseIdentifier":"s:7SwiftUI5SceneP"}],"abstract":[],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceApp\/body","kind":"symbol","type":"topic","url":"\/documentation\/trace\/traceapp\/body"},"doc://Tahmid-Azam.Trace/documentation/Trace/TraceDocument/init(trace:)":{"role":"symbol","title":"init(trace:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"trace"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"TraceDocumentContents","preciseIdentifier":"s:5Trace0A16DocumentContentsV"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Initialises a trace document."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument\/init(trace:)","kind":"symbol","type":"topic","url":"\/documentation\/trace\/tracedocument\/init(trace:)"},"doc://Tahmid-Azam.Trace/documentation/Trace/TraceDocumentContents/streams":{"role":"symbol","title":"streams","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"streams"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"Stream","preciseIdentifier":"s:5Trace6StreamV"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"An array containing the streams of EEG data for each electrode in the trace."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents\/streams","kind":"symbol","type":"topic","url":"\/documentation\/trace\/tracedocumentcontents\/streams"},"doc://Tahmid-Azam.Trace/documentation/Trace/TraceDocument/fileWrapper(configuration:)":{"role":"symbol","title":"fileWrapper(configuration:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"fileWrapper"},{"kind":"text","text":"("},{"kind":"externalParam","text":"configuration"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"WriteConfiguration","preciseIdentifier":"s:7SwiftUI12FileDocumentP18WriteConfigurationa"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"FileWrapper","preciseIdentifier":"c:objc(cs)NSFileWrapper"}],"abstract":[{"type":"text","text":"Wraps the compressed trace document structure to a file."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocument\/fileWrapper(configuration:)","kind":"symbol","type":"topic","url":"\/documentation\/trace\/tracedocument\/filewrapper(configuration:)"},"doc://Tahmid-Azam.Trace/documentation/Trace/CompressedTraceDocumentContents/uncompressed()":{"role":"symbol","title":"uncompressed()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"uncompressed"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"TraceDocumentContents","preciseIdentifier":"s:5Trace0A16DocumentContentsV"}],"abstract":[{"type":"text","text":"Uncompresses a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/TraceDocumentContents"},{"type":"text","text":"."}],"identifier":"doc:\/\/Tahmid-Azam.Trace\/documentation\/Trace\/CompressedTraceDocumentContents\/uncompressed()","kind":"symbol","type":"topic","url":"\/documentation\/trace\/compressedtracedocumentcontents\/uncompressed()"}}}